[{"name":"app.R","content":"library(tidyvpc)\nlibrary(shiny)\nlibrary(bslib)\n\nobs_data <- tidyvpc::obs_data[MDV == 0]\nsim_data <- tidyvpc::sim_data[MDV == 0]\n\n\nui <- page_sidebar(\n  title = \"Visual Predictive Check (VPC)\",\n  sidebar = sidebar(\n    title = \"VPC controls\",\n    selectInput(\n      \"bin_method\",\n      \"Binning Method\",\n      choices = c(\n        \"jenks\",\n        \"kmeans\",\n        \"sd\",\n        \"pretty\",\n        \"pam\",\n        \"kmeans\",\n        \"hclust\",\n        \"bclust\",\n        \"fisher\"\n      )\n    ),\n    numericInput(\"n_bins\", \"Number of bins\", 6),\n    selectInput(\n      \"bin_midpoint\",\n      \"Bin Midpoint\",\n      choices = c(\"xmedian\", \"xmean\", \"xleft\", \"xright\", \"xmax\", \"xmin\")\n    )\n\n  ),\n  card(card_header(\"VPC Plot\"),\n       plotOutput(\"vpc_plot\"))\n)\n\nserver <- function(input, output) {\n  output$vpc_plot <- renderPlot({\n    observed(obs_data, x = TIME, yobs = DV) |>\n      simulated(sim_data, ysim = DV) |>\n      binning(\n        bin = input$bin_method,\n        nbins = input$n_bins,\n        xbin = input$bin_midpoint\n      ) |>\n      vpcstats() |>\n      plot()\n\n  })\n}\n\nshinyApp(ui, server)\n","type":"text"}]
